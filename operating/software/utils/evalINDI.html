

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>evalINDI &mdash; MagAO-X Instrument Handbook  documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../../../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/language_data.js"></script>
        <script src="../../../_static/stats.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="indiserver" href="indiserver.html" />
    <link rel="prev" title="setINDI" href="setINDI.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../../index.html">
          

          
            
            <img src="../../../_static/magao-x_logo_white.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../observers/index.html">Information For Observers</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Operation of the MagAO-X instrument</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">Instrument Software</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../apps/index.html">Applications</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">Utilities</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="getINDI.html">getINDI</a></li>
<li class="toctree-l4"><a class="reference internal" href="setINDI.html">setINDI</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">evalINDI</a></li>
<li class="toctree-l4"><a class="reference internal" href="indiserver.html">indiserver</a></li>
<li class="toctree-l4"><a class="reference internal" href="logdump.html">logdump</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../troubleshooting.html">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../handling/index.html">Handling Procedures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../compute/index.html">Compute System</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../appendices/index.html">Appendices</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">MagAO-X Instrument Handbook</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Operation of the MagAO-X instrument</a> &raquo;</li>
        
          <li><a href="../index.html">Instrument Software</a> &raquo;</li>
        
          <li><a href="index.html">Utilities</a> &raquo;</li>
        
      <li>evalINDI</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../../_sources/operating/software/utils/evalINDI.md.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="evalindi">
<h1>evalINDI<a class="headerlink" href="#evalindi" title="Permalink to this headline">¶</a></h1>
<div class="section" id="name">
<h2>Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p>evalINDI − evaluate an expression of INDI property values</p>
</div>
<div class="section" id="synopsis">
<h2>Synopsis<a class="headerlink" href="#synopsis" title="Permalink to this headline">¶</a></h2>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">evalINDI</span> <span class="p">[</span><span class="n">options</span><span class="p">]</span> <span class="p">[</span><span class="n">exp</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="section" id="description">
<h2>Description<a class="headerlink" href="#description" title="Permalink to this headline">¶</a></h2>
<p>evalINDI connects to an indiserver and listens for the values of properties to evaluate an arithmetic expression. Each property is specified using three components enclosed in double quotes in the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;device.property.element&quot;</span>
</pre></div>
</div>
<p>The last component of the property specification is usually the element name, but may be a reserved name to indicate an attribute of the property as a whole. These reserved names are as follows:</p>
<table>
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"></td>
<td align="left"><p>_STATE</p></td>
<td align="left"><p>the state attribute, where for the purposes of evaluation the usual keywords <em>Idle, Ok, Busy</em> and <em>Alert</em> are converted to the numeric values of 0, 1, 2 and 3 respectively.</p></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><p>_TS</p></td>
<td align="left"><p>evaluate the timestamp attribute as the number of UNIX seconds from epoch</p></td>
</tr>
</tbody>
</table><p>Switch vectors evalute to 0 or 1 based on the state values of Off and On, respectively. Light vectors evaluate to 0-3 similarly to the keywords described above for _STATE.</p>
<p>The arithmetic expression, <em>exp,</em> follows the form of that used in the C programming language. The operators supported include:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>! + - * / &amp;&amp; || &gt; &gt;= == != &lt; &lt;=
</pre></div>
</div>
<p>and the mathematical functions supported include:</p>
<p><code class="docutils literal notranslate"><span class="pre">sin(rad)</span></code> <code class="docutils literal notranslate"><span class="pre">cos(rad)</span></code> <code class="docutils literal notranslate"><span class="pre">tan(rad)</span></code> <code class="docutils literal notranslate"><span class="pre">asin(x)</span></code> <code class="docutils literal notranslate"><span class="pre">acos(x)</span></code> <code class="docutils literal notranslate"><span class="pre">atan(x)</span></code> <code class="docutils literal notranslate"><span class="pre">atan2(y,x)</span></code> <code class="docutils literal notranslate"><span class="pre">abs(x)</span></code> <code class="docutils literal notranslate"><span class="pre">degrad(deg)</span></code> <code class="docutils literal notranslate"><span class="pre">raddeg(rad)</span></code> <code class="docutils literal notranslate"><span class="pre">floor(x)</span></code> <code class="docutils literal notranslate"><span class="pre">log(x)</span></code> <code class="docutils literal notranslate"><span class="pre">log10(x)</span></code> <code class="docutils literal notranslate"><span class="pre">exp(x)</span></code> <code class="docutils literal notranslate"><span class="pre">sqrt(x)</span></code>  <code class="docutils literal notranslate"><span class="pre">pow(x,exp)</span></code></p>
<p>The value of PI can be specified using a constant named “pi”.</p>
</div>
<div class="section" id="options">
<h2>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h2>
<table>
<colgroup>
<col width="10%" />
<col width="30%" />
<col width="60%" />
</colgroup>
<tbody>
<tr class="odd">
<td align="left"></td>
<td align="left"><p>-b</p></td>
<td align="left"><p>Ring the terminal bell when expression evaluates as true.</p></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><p>-d &lt;f&gt;</p></td>
<td align="left"><p>use file descriptor f already open as a socket to the indiserver. This is useful for scripts to make a session connection one time then reuse it for each invocation. If the file descriptor seems to be being closed, check that the close-on-exec flag is off; for example in perl use something like:</p><p><code class="docutils literal notranslate"><span class="pre">#!/usr/bin/perl</span></code><br/>
<code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">Socket;</span></code><br/>
<code class="docutils literal notranslate"><span class="pre">use</span> <span class="pre">Fcntl;</span></code><br/>
<code class="docutils literal notranslate"><span class="pre">socket(SOCK,</span> <span class="pre">PF_INET,</span> <span class="pre">SOCK_STREAM,</span> <span class="pre">getprotobyname(’tcp’));</span></code><br/>
<code class="docutils literal notranslate"><span class="pre">connect(SOCK,</span> <span class="pre">sockaddr_in(7624,inet_aton(’localhost’)));</span></code><br/>
<code class="docutils literal notranslate"><span class="pre">fcntl(SOCK,F_SETFD,0);</span></code><br/>
<code class="docutils literal notranslate"><span class="pre">$directfd</span> <span class="pre">=</span> <span class="pre">fileno(SOCK);</span></code><br/>
<code class="docutils literal notranslate"><span class="pre">&amp;runindi</span> <span class="pre">(&quot;./evalINDI&quot;,</span> <span class="pre">&quot;-d&quot;,</span> <span class="pre">&quot;$directfd&quot;,</span> <span class="pre">&quot;\&quot;x.y.z\&quot;==1&quot;);</span></code><br/>
<code class="docutils literal notranslate"><span class="pre">sub</span> <span class="pre">runindi</span> <span class="pre">{</span> <span class="pre">if</span> <span class="pre">(fork())</span> <span class="pre">{</span> <span class="pre">wait();</span> <span class="pre">}</span> <span class="pre">else</span> <span class="pre">{</span> <span class="pre">exec</span> <span class="pre">&#64;_;</span> <span class="pre">}</span> <span class="pre">}</span></code><br/></p>
</td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"><p>-e</p></td>
<td align="left"><p>print each updated expression value after each evaluation</p></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><p>-f</p></td>
<td align="left"><p>print the final expression value</p></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"><p>-h &lt;h&gt;</p></td>
<td align="left"><p>connect to alternate host h; the default is localhost.</p></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><p>-i</p></td>
<td align="left"><p>read the expression from stdin</p></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"><p>-o</p></td>
<td align="left"><p>print each operand each time it changes value in the form property=value</p></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><p>-p &lt;p&gt;</p></td>
<td align="left"><p>connect using alternate port p; the default is 7624.</p></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"><p>-t &lt;t&gt;</p></td>
<td align="left"><p>wait no longer than t seconds to gather the initial values for all the specified properties; 0 means forever, the default is 2 seconds.</p></td>
</tr>
<tr class="even">
<td align="left"></td>
<td align="left"><p>-v</p></td>
<td align="left"><p>generate additional information on stderr. This is cumulative in that specifying more -v options will generate more output.</p></td>
</tr>
<tr class="odd">
<td align="left"></td>
<td align="left"><p>-w</p></td>
<td align="left"><p>evaluate the expression as many times as necessary until it evaluates to a value other than zero.</p></td>
</tr>
</tbody>
</table></div>
<div class="section" id="exit-status">
<h2>Exit Status<a class="headerlink" href="#exit-status" title="Permalink to this headline">¶</a></h2>
<p>The evalINDI program exits with a statis of 0 if the expression evaluates to non-0. It exits with 1 if the expression evaluated to 0. It exits with 2 if there was some other error such as not being able to connect to the indiserver.</p>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<p>Print 0/1 whether the Front or Rear elements of the Security property are in a state of Alert:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>evalINDI -f ’&quot;Security.Security.Front&quot;==3 || &quot;Security.Security.Rear&quot;==3’
</pre></div>
</div>
<p>Exit 0 if the Security property as a whole is in a state of Ok:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>evalINDI ’&quot;Security.Security._STATE&quot;==1’
</pre></div>
</div>
<p>Wait forever for RA and Dec to be near zero and watch their values as they change:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>evalINDI -t 0 -wo ’abs(&quot;Mount.EqJ2K.RA&quot;)&lt;.01 &amp;&amp; abs(&quot;Mount.EqJ2K.Dec&quot;)&lt;.01’
</pre></div>
</div>
<p>Wait forever for the wind speed to become larger than 50:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>evalINDI -t 0 -w ’&quot;Weather.Wind.Speed&quot;&gt;50’
</pre></div>
</div>
</div>
<div class="section" id="see-also">
<h2>See Also<a class="headerlink" href="#see-also" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><a class="reference internal" href="getINDI.html"><span class="doc">getINDI</span></a></p></li>
<li><p><a class="reference internal" href="setINDI.html"><span class="doc">setINDI</span></a></p></li>
<li><p><a class="reference internal" href="indiserver.html"><span class="doc">indiserver</span></a></p></li>
<li><p>The <a class="reference external" href="http://www.clearskyinstitute.com/INDI/INDI.pdf">INDI specification v. 1.7</a></p></li>
</ul>
<hr class="docutils" />
<p>This evalINDI.md generated from the man documentation with the commands:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">groff</span> <span class="o">-</span><span class="n">mandoc</span> <span class="o">-</span><span class="n">Thtml</span> <span class="n">evalINDI</span><span class="o">.</span><span class="n">man</span> <span class="o">&gt;</span> <span class="n">evalINDI</span><span class="o">.</span><span class="n">html</span>
<span class="n">pandoc</span> <span class="o">-</span><span class="n">t</span> <span class="n">markdown_github</span> <span class="n">evalINDI</span><span class="o">.</span><span class="n">html</span> <span class="o">&gt;</span> <span class="n">evalINDI</span><span class="o">.</span><span class="n">md</span>
</pre></div>
</div>
<p>and then tweaked for presentation.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="indiserver.html" class="btn btn-neutral float-right" title="indiserver" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="setINDI.html" class="btn btn-neutral float-left" title="setINDI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019, Extreme Wavefront Control Lab, The University of Arizona

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>